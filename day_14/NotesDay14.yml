ðŸ“‘ Agenda for Week 07 Day 02: Playwright with REST API Integration

ðŸŽ¯ [ Focus: Integrating Playwright with REST APIs for End-to-End Automation Testing ]

ðŸ“† [26 Oct. Sunday]  

ðŸ• Session Highlights  

â¿¡ Recap  
* Quick review of key learnings from previous sessions.  

â¿¢ Implementation in Postman - POST & GET Lead Without Global Variable [Salesforce]  
* Demonstration: Creating and retrieving leads.  

â¿¤ Implementation in Postman - POST & GET Lead With Global Variable  
* Demonstration: Using global variables for better test management.  


â¿¦ APIRequest, APIRequestContext, APIResponse  
* Overview of these key Playwright API concepts.  

â¿§ Status Code, Response Body & Response Time  
* Understanding and validating API response attributes.  

â¿¨ POST Call (Creating a Lead)  
* Demonstration of making POST requests in Playwright.  

â¿© GET Call (Retrieving the Lead)  
* Retrieving data using GET requests in Playwright.  

 DELETE Call (Deleting the Lead)  
* Automating the deletion of records using DELETE requests.  

 

ðŸ•¡ Practice/Wrap

ðŸ“ Keep your physical notebook and pen handy to sketchÂ outÂ ideas!


Notes:

creating page reference in playwright :

const browser = chromium.launch() --> Connect btowser engine
const context = browser.newContext() --> Window launched
const page = context.newPage() --> a tab is loaded in that particular Window

In playwright API testing happens by directly hitting your CDP network tabs :

creating request reference in playwright using "APIRequestContext" :
  // 1. Create a new API context (like creating a browser context)
  const apiContext = await request.newContext(); //Creates a new API request context (like an isolated API session)

  // 2. Send API request (GET, POST, PUT, DELETE, etc.)
  const response = await apiContext.post('https://reqres.in/api/users/2'); //Sends a GET request

  // 3. Validate response
  console.log(await response.status());       // 200

APIRequestContext--> Interface provided by Playwright to make your API calls.

**********************************************************************************
Frequently Asked Questions :
----------------------------

### What response.json() really does

When you call an API (like ServiceNowâ€™s), it sends back data in JSON text format, for example:

âœ… response.json() â†’ JSON string âžœ object


###Why encoding is needed (and not plain username/password)

- HTTP headers only accept ASCII text, not special characters like %, *, etc.

- Base64 encoding ensures your credentials are transmitted safely as plain text (not encrypted, but properly formatted).

- ServiceNow (and most APIs) expects credentials in this Base64 form for Basic Auth requests â€” if you send raw username and password, it wonâ€™t recognize them.

----------------------------------------

### Using nested JSON to retrieve below line:

   console.log(responseBody.result.sys_id);

------------------------------------------------

responseBody :

{
  result: {
    parent: '',
    made_sla: 'true',
    caused_by: '',
    watch_list: '',
    upon_reject: 'cancel',
    sys_updated_on: '2025-10-26 10:15:16',
    child_incidents: '0',
    hold_reason: '',
    origin_table: '',
    task_effective_number: 'INC0010086',
    approval_history: '',
    number: 'INC0010086',
    resolved_by: '',
    sys_updated_by: 'admin',
    opened_by: {
      link: 'https://dev224307.service-now.com/api/now/table/sys_user/6816f79cc0a8016401c5a33be04be441',
      value: '6816f79cc0a8016401c5a33be04be441'
    },
    user_input: '',
    sys_created_on: '2025-10-26 10:15:16',
    sys_domain: {
      link: 'https://dev224307.service-now.com/api/now/table/sys_user_group/global',
      value: 'global'
    },
    state: '1',
    route_reason: '',
    sys_created_by: 'admin',
    knowledge: 'false',
    order: '',
    calendar_stc: '',
    closed_at: '',
    cmdb_ci: '',
    delivery_plan: '',
    contract: '',
    impact: '3',
    active: 'true',
    work_notes_list: '',
    business_service: '',
    business_impact: '',
    priority: '5',
    sys_domain_path: '/',
    rfc: '',
    time_worked: '',
    expected_start: '',
    opened_at: '2025-10-26 10:15:16',
    business_duration: '',
    group_list: '',
    work_end: '',
    caller_id: '',
    reopened_time: '',
    resolved_at: '',
    approval_set: '',
    subcategory: '',
    work_notes: '',
    universal_request: '',
    short_description: 'Network Issue Created through Playwright',
    close_code: '',
    correlation_display: '',
    delivery_task: '',
    work_start: '',
    assignment_group: '',
    additional_assignee_list: '',
    business_stc: '',
    cause: '',
    description: 'Network Issue',
    origin_id: '',
    calendar_duration: '',
    close_notes: '',
    notify: '1',
    service_offering: '',
    sys_class_name: 'incident',
    closed_by: '',
    follow_up: '',
    parent_incident: '',
    sys_id: 'ff0905c283b8b21079abe070deaad3a3',
    contact_type: '',
    reopened_by: '',
    incident_state: '1',
    urgency: '3',
    problem_id: '',
    company: '',
    reassignment_count: '0',
    activity_due: '',
    assigned_to: '',
    severity: '3',
    comments: '',
    approval: 'not requested',
    sla_due: '',
    comments_and_work_notes: '',
    due_date: '',
    sys_mod_count: '0',
    reopen_count: '0',
    sys_tags: '',
    escalation: '0',
    upon_approval: 'proceed',
    correlation_id: '',
    location: '',
    category: 'inquiry'
    location: '',
    location: '',
    location: '',
    category: 'inquiry'
  }
}

Salesforce responseBody :

{
  access_token: '00DNS000001rTAX!AQEAQGDuXe3tovLNx7VrFZ0kmuu_gEq5ZDzlSois8eJarOjMQNi7gOzcyewtRnXDlI4TDXuWX9pUL.sHra_eMAR6BRImUxeX',
  instance_url: 'https://testleaf22-dev-ed.develop.my.salesforce.com',
  id: 'https://login.salesforce.com/id/00DNS000001rTAX2A2/005NS000001C9hOYAS',
  token_type: 'Bearer',
  issued_at: '1761479090996',
  signature: 'ZaGlLV64FuiCcVmRb/4zD32tXfgBrO7VWD4egjDfuHI='
}
200                                                                                                        
OK











